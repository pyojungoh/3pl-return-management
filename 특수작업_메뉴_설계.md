# íŠ¹ìˆ˜ì‘ì—… ë©”ë‰´ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [í•µì‹¬ ì›ì¹™](#í•µì‹¬-ì›ì¹™)
2. [íŒŒì¼ êµ¬ì¡°](#íŒŒì¼-êµ¬ì¡°)
3. [ëª¨ë“œë³„ í•¨ìˆ˜ ë¶„ë¦¬ êµ¬ì¡°](#ëª¨ë“œë³„-í•¨ìˆ˜-ë¶„ë¦¬-êµ¬ì¡°)
4. [HTML êµ¬ì¡°](#html-êµ¬ì¡°)
5. [ì´ˆê¸°í™” íë¦„](#ì´ˆê¸°í™”-íë¦„)
6. [ê°€ì‹œì„± ì œì–´](#ê°€ì‹œì„±-ì œì–´)
7. [API ì„¤ê³„](#api-ì„¤ê³„)
8. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
9. [ì‘ì—… ìˆœì„œ](#ì‘ì—…-ìˆœì„œ)

---

## í•µì‹¬ ì›ì¹™

### âš ï¸ ëª¨ë“œ ì™„ì „ ë¶„ë¦¬ ì›ì¹™
- **ê° ëª¨ë“œëŠ” ë…ë¦½ì ì¸ í•¨ìˆ˜ ê·¸ë£¹ìœ¼ë¡œ ì™„ì „ ë¶„ë¦¬**
- **í•œ ëª¨ë“œ ìˆ˜ì •ì´ ë‹¤ë¥¸ ëª¨ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì„¤ê³„**
- **ê³µí†µ ê¸°ëŠ¥ì€ ë³„ë„ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•˜ì—¬ ì¬ì‚¬ìš©**

### ëª¨ë“œ êµ¬ë¶„
1. **ê´€ë¦¬ì ëª¨ë“œ**: ì‘ì—… ì¢…ë¥˜ ê´€ë¦¬, ì‘ì—… ë“±ë¡, ëª¨ë“  í™”ì£¼ì‚¬ ë°ì´í„° ì¡°íšŒ
2. **í™”ì£¼ì‚¬ ëª¨ë“œ**: ë³¸ì¸ í™”ì£¼ì‚¬ ë°ì´í„°ë§Œ ì¡°íšŒ
3. **ê³µí†µ ëª¨ë“œ**: ì‘ì—… ëª©ë¡ í…Œì´ë¸”, ê¸°ë³¸ ìŠ¤íƒ€ì¼, ê³µí†µ ìœ í‹¸ë¦¬í‹°

---

## íŒŒì¼ êµ¬ì¡°

```
í”„ë¡œì íŠ¸ ë£¨íŠ¸/
â”œâ”€â”€ special_works.html (ìƒˆ íŒŒì¼)
â”‚   â”œâ”€â”€ HTML êµ¬ì¡°
â”‚   â”‚   â”œâ”€â”€ ê´€ë¦¬ì ì „ìš© ì„¹ì…˜ (swAdminSection)
â”‚   â”‚   â”œâ”€â”€ í™”ì£¼ì‚¬ ì „ìš© ì„¹ì…˜ (swConsignorSection)
â”‚   â”‚   â””â”€â”€ ê³µí†µ ì„¹ì…˜ (swCommonSection)
â”‚   â”œâ”€â”€ CSS (ëª¨ë“œë³„ ìŠ¤íƒ€ì¼ ë¶„ë¦¬)
â”‚   â””â”€â”€ JavaScript (ëª¨ë“œë³„ í•¨ìˆ˜ ë¶„ë¦¬)
â”‚       â”œâ”€â”€ ê³µí†µ í•¨ìˆ˜ (swCommon*)
â”‚       â”œâ”€â”€ ê´€ë¦¬ì í•¨ìˆ˜ (swAdmin*)
â”‚       â””â”€â”€ í™”ì£¼ì‚¬ í•¨ìˆ˜ (swConsignor*)
â”‚
â”œâ”€â”€ api/
â”‚   â””â”€â”€ special_works/ (ìƒˆ ë””ë ‰í† ë¦¬)
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ routes_db.py (ìƒˆ íŒŒì¼)
â”‚           â””â”€â”€ API ì—”ë“œí¬ì¸íŠ¸ (ëª¨ë“œ êµ¬ë¶„ ì—†ì´ ë°ì´í„°ë§Œ ì œê³µ)
â”‚
â”œâ”€â”€ app.py (ê¸°ì¡´ íŒŒì¼, blueprint ë“±ë¡ë§Œ ì¶”ê°€)
â””â”€â”€ dashboard_server.html (ê¸°ì¡´ íŒŒì¼, ë©”ë‰´ ë²„íŠ¼ë§Œ ì¶”ê°€)
```

---

## ëª¨ë“œë³„ í•¨ìˆ˜ ë¶„ë¦¬ êµ¬ì¡°

### 1. ì´ˆê¸°í™” í•¨ìˆ˜ (ì™„ì „ ë¶„ë¦¬)

#### ê³µí†µ ì´ˆê¸°í™”
```javascript
/**
 * ê³µí†µ ì´ˆê¸°í™” í•¨ìˆ˜
 * ì—­í•  í™•ì¸ í›„ ëª¨ë“œë³„ ì´ˆê¸°í™” í•¨ìˆ˜ í˜¸ì¶œ
 */
function swCommonInit() {
  // 1. ì»¨í…Œì´ë„ˆ í™•ì¸
  const container = document.getElementById('swContainer');
  if (!container) {
    console.error('[SW] swContainerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    return;
  }
  
  // 2. ì—­í•  í™•ì¸ (ì „ì—­ ë³€ìˆ˜ ìš°ì„  ì‚¬ìš©)
  const role = window.currentRole || '';
  const company = window.currentCompany || '';
  const username = window.currentUsername || '';
  
  // 3. ì „ì—­ ë³€ìˆ˜ ì„¤ì •
  swCurrentRole = role;
  swCurrentCompany = company;
  swCurrentUsername = username;
  
  // 4. ëª¨ë“œë³„ ì´ˆê¸°í™” í•¨ìˆ˜ í˜¸ì¶œ
  if (swCurrentRole === 'ê´€ë¦¬ì') {
    swAdminInit();
  } else {
    swConsignorInit();
  }
  
  // 5. ê°€ì‹œì„± ì œì–´
  swApplyVisibility();
}
```

#### ê´€ë¦¬ì ì „ìš© ì´ˆê¸°í™”
```javascript
/**
 * ê´€ë¦¬ì ëª¨ë“œ ì´ˆê¸°í™” í•¨ìˆ˜
 * ê´€ë¦¬ì ì „ìš© ê¸°ëŠ¥ë§Œ ì´ˆê¸°í™”
 */
function swAdminInit() {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  // 1. ë‚ ì§œ í•„í„° ì´ˆê¸°í™” (ì˜¤ëŠ˜ ë‚ ì§œ)
  const today = new Date().toISOString().split('T')[0];
  const startDate = container.querySelector('#swAdminFilterStartDate');
  const endDate = container.querySelector('#swAdminFilterEndDate');
  if (startDate) startDate.value = today;
  if (endDate) endDate.value = today;
  
  // 2. ì‘ì—… ë“±ë¡ í¼ ë‚ ì§œ ì´ˆê¸°í™”
  const workDate = container.querySelector('#swAdminWorkDate');
  if (workDate) workDate.value = today;
  
  // 3. í™”ì£¼ì‚¬ ëª©ë¡ ë¡œë“œ
  swAdminLoadCompanies();
  
  // 4. ì‘ì—… ì¢…ë¥˜ ëª©ë¡ ë¡œë“œ
  swCommonLoadWorkTypes();
  
  // 5. ì‘ì—… ëª©ë¡ ë¡œë“œ
  swAdminLoadWorks();
}
```

#### í™”ì£¼ì‚¬ ì „ìš© ì´ˆê¸°í™”
```javascript
/**
 * í™”ì£¼ì‚¬ ëª¨ë“œ ì´ˆê¸°í™” í•¨ìˆ˜
 * í™”ì£¼ì‚¬ ì „ìš© ê¸°ëŠ¥ë§Œ ì´ˆê¸°í™”
 */
function swConsignorInit() {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  // 1. ì›” í•„í„° ì´ˆê¸°í™” (ì˜¤ëŠ˜ ì›”)
  const today = new Date().toISOString().split('T')[0];
  const monthInput = container.querySelector('#swConsignorFilterMonth');
  if (monthInput) monthInput.value = today.slice(0, 7); // YYYY-MM
  
  // 2. ì‘ì—… ì¢…ë¥˜ ëª©ë¡ ë¡œë“œ
  swCommonLoadWorkTypes();
  
  // 3. ì‘ì—… ëª©ë¡ ë¡œë“œ
  swConsignorLoadWorks();
}
```

### 2. ë°ì´í„° ë¡œë“œ í•¨ìˆ˜ (ì™„ì „ ë¶„ë¦¬)

#### ê´€ë¦¬ì ì „ìš© ë°ì´í„° ë¡œë“œ
```javascript
/**
 * ê´€ë¦¬ì ëª¨ë“œ ì‘ì—… ëª©ë¡ ë¡œë“œ
 * ê´€ë¦¬ì í•„í„° ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ
 */
function swAdminLoadWorks() {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  // 1. í•„í„° ê°’ ìˆ˜ì§‘
  const startDate = container.querySelector('#swAdminFilterStartDate')?.value || '';
  const endDate = container.querySelector('#swAdminFilterEndDate')?.value || '';
  const workTypeId = container.querySelector('#swAdminFilterWorkType')?.value || '';
  const companyName = container.querySelector('#swAdminFilterCompany')?.value || '';
  
  // 2. ë‚ ì§œê°€ ë¹„ì–´ìˆìœ¼ë©´ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì„¤ì •
  const today = new Date().toISOString().split('T')[0];
  const finalStartDate = startDate || today;
  const finalEndDate = endDate || today;
  
  // 3. API URL êµ¬ì„±
  let url = '/api/special-works/works?';
  if (finalStartDate) url += `start_date=${finalStartDate}&`;
  if (finalEndDate) url += `end_date=${finalEndDate}&`;
  if (workTypeId) url += `work_type_id=${workTypeId}&`;
  if (companyName) url += `company_name=${encodeURIComponent(companyName)}&`;
  
  // 4. ë¡œë”© í‘œì‹œ
  const tbody = container.querySelector('#swTableBody');
  if (tbody) tbody.innerHTML = '<tr><td colspan="10">ë¡œë”© ì¤‘...</td></tr>';
  
  // 5. API í˜¸ì¶œ
  fetch(url, {
    credentials: 'include',
    headers: swGetUserHeaders()
  })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        let works = data.data || [];
        // ë‚ ì§œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        works.sort((a, b) => new Date(b.work_date) - new Date(a.work_date));
        // ê´€ë¦¬ì ì „ìš© ë Œë”ë§
        swAdminRenderWorks(works);
        // ê´€ë¦¬ì ì „ìš© í†µê³„ ì—…ë°ì´íŠ¸
        swAdminUpdateStats(works);
      }
    })
    .catch(error => {
      console.error('[SW] ê´€ë¦¬ì ì‘ì—… ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
    });
}
```

#### í™”ì£¼ì‚¬ ì „ìš© ë°ì´í„° ë¡œë“œ
```javascript
/**
 * í™”ì£¼ì‚¬ ëª¨ë“œ ì‘ì—… ëª©ë¡ ë¡œë“œ
 * í™”ì£¼ì‚¬ í•„í„° ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„° ì¡°íšŒ
 */
function swConsignorLoadWorks() {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  // 1. ì›” í•„í„° ê°’ ìˆ˜ì§‘
  const monthValue = container.querySelector('#swConsignorFilterMonth')?.value || '';
  
  // 2. ì›”ì„ ë‚ ì§œ ë²”ìœ„ë¡œ ë³€í™˜
  let startDate = '';
  let endDate = '';
  if (monthValue) {
    const [yearStr, monthStr] = monthValue.split('-');
    const year = parseInt(yearStr, 10);
    const month = parseInt(monthStr, 10);
    const lastDay = new Date(year, month, 0).getDate();
    const paddedMonth = monthStr.padStart(2, '0');
    startDate = `${yearStr}-${paddedMonth}-01`;
    endDate = `${yearStr}-${paddedMonth}-${String(lastDay).padStart(2, '0')}`;
  }
  
  // 3. í™”ì£¼ì‚¬ëª… í™•ì¸
  const companyName = swCurrentCompany;
  if (!companyName) {
    console.error('[SW] í™”ì£¼ì‚¬ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    return;
  }
  
  // 4. API URL êµ¬ì„±
  let url = '/api/special-works/works?';
  if (startDate) url += `start_date=${startDate}&`;
  if (endDate) url += `end_date=${endDate}&`;
  url += `company_name=${encodeURIComponent(companyName)}&`;
  
  // 5. ë¡œë”© í‘œì‹œ
  const tbody = container.querySelector('#swTableBody');
  if (tbody) tbody.innerHTML = '<tr><td colspan="9">ë¡œë”© ì¤‘...</td></tr>';
  
  // 6. API í˜¸ì¶œ
  fetch(url, {
    credentials: 'include',
    headers: swGetUserHeaders()
  })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        let works = data.data || [];
        // ë‚ ì§œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        works.sort((a, b) => new Date(b.work_date) - new Date(a.work_date));
        // í™”ì£¼ì‚¬ ì „ìš© ë Œë”ë§
        swConsignorRenderWorks(works);
        // í™”ì£¼ì‚¬ ì „ìš© í†µê³„ ì—…ë°ì´íŠ¸
        swConsignorUpdateStats(works);
      }
    })
    .catch(error => {
      console.error('[SW] í™”ì£¼ì‚¬ ì‘ì—… ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
    });
}
```

### 3. ë Œë”ë§ í•¨ìˆ˜ (ì™„ì „ ë¶„ë¦¬)

#### ê´€ë¦¬ì ì „ìš© ë Œë”ë§
```javascript
/**
 * ê´€ë¦¬ì ëª¨ë“œ ì‘ì—… ëª©ë¡ ë Œë”ë§
 * ê´€ë¦¬ ì»¬ëŸ¼ í¬í•¨
 */
function swAdminRenderWorks(works) {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  const tbody = container.querySelector('#swTableBody');
  if (!tbody) return;
  
  // ì‘ì—… ì¢…ë¥˜ í•„í„° ì ìš©
  let filteredWorks = works;
  if (swSelectedWorkType) {
    filteredWorks = works.filter(work => work.work_type_name === swSelectedWorkType);
  }
  
  if (filteredWorks.length === 0) {
    tbody.innerHTML = '<tr><td colspan="10">ë“±ë¡ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
    return;
  }
  
  // HTML ìƒì„± (ê´€ë¦¬ ì»¬ëŸ¼ í¬í•¨)
  const html = filteredWorks.map((work, index) => {
    // ... HTML ìƒì„± ë¡œì§
    return `
      <tr>
        <td>${index + 1}</td>
        <td>${work.work_date}</td>
        <td>${work.company_name}</td>
        <td>${work.work_type_name}</td>
        <td>${work.quantity}</td>
        <td>${work.unit_price}ì›</td>
        <td>${work.total_price}ì›</td>
        <td>${photoThumbnails}</td>
        <td>${work.memo}</td>
        <td class="sw-admin-only">
          <button onclick="swAdminDeleteWork(${work.id})">ì‚­ì œ</button>
        </td>
      </tr>
    `;
  }).join('');
  
  tbody.innerHTML = html;
  
  // ê°€ì‹œì„± ì œì–´ (ê´€ë¦¬ ì»¬ëŸ¼ í‘œì‹œ)
  swApplyVisibility();
}
```

#### í™”ì£¼ì‚¬ ì „ìš© ë Œë”ë§
```javascript
/**
 * í™”ì£¼ì‚¬ ëª¨ë“œ ì‘ì—… ëª©ë¡ ë Œë”ë§
 * ê´€ë¦¬ ì»¬ëŸ¼ ì œì™¸
 */
function swConsignorRenderWorks(works) {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  const tbody = container.querySelector('#swTableBody');
  if (!tbody) return;
  
  // ì‘ì—… ì¢…ë¥˜ í•„í„° ì ìš©
  let filteredWorks = works;
  if (swSelectedWorkType) {
    filteredWorks = works.filter(work => work.work_type_name === swSelectedWorkType);
  }
  
  if (filteredWorks.length === 0) {
    tbody.innerHTML = '<tr><td colspan="9">ë“±ë¡ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
    return;
  }
  
  // HTML ìƒì„± (ê´€ë¦¬ ì»¬ëŸ¼ ì œì™¸)
  const html = filteredWorks.map((work, index) => {
    // ... HTML ìƒì„± ë¡œì§
    return `
      <tr>
        <td>${index + 1}</td>
        <td>${work.work_date}</td>
        <td>${work.work_type_name}</td>
        <td>${work.quantity}</td>
        <td>${work.unit_price}ì›</td>
        <td>${work.total_price}ì›</td>
        <td>${photoThumbnails}</td>
        <td>${work.memo}</td>
      </tr>
    `;
  }).join('');
  
  tbody.innerHTML = html;
  
  // ê°€ì‹œì„± ì œì–´ (ê´€ë¦¬ ì»¬ëŸ¼ ìˆ¨ê¹€)
  swApplyVisibility();
}
```

### 4. í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì™„ì „ ë¶„ë¦¬)

#### ê´€ë¦¬ì ì „ìš© í†µê³„
```javascript
/**
 * ê´€ë¦¬ì ëª¨ë“œ ì‘ì—… ì¢…ë¥˜ë³„ í†µê³„ ì—…ë°ì´íŠ¸
 */
function swAdminUpdateStats(works) {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  const statsContainer = container.querySelector('#swAdminStatsContainer');
  if (!statsContainer) return;
  
  // ì‘ì—… ì¢…ë¥˜ë³„ ê·¸ë£¹í™”
  const stats = {};
  works.forEach(work => {
    const typeName = work.work_type_name || 'ê¸°íƒ€';
    if (!stats[typeName]) {
      stats[typeName] = { count: 0, total: 0 };
    }
    stats[typeName].count++;
    stats[typeName].total += work.total_price || 0;
  });
  
  // HTML ìƒì„±
  const html = Object.entries(stats).map(([typeName, data]) => {
    return `
      <div class="sw-stat-box" onclick="swFilterByWorkType('${typeName}')">
        ${typeName} / ${data.count}ê±´ / í•©ê³„: ${data.total.toLocaleString()}ì›
      </div>
    `;
  }).join('');
  
  statsContainer.innerHTML = html;
}
```

#### í™”ì£¼ì‚¬ ì „ìš© í†µê³„
```javascript
/**
 * í™”ì£¼ì‚¬ ëª¨ë“œ ì‘ì—… ì¢…ë¥˜ë³„ í†µê³„ ì—…ë°ì´íŠ¸
 */
function swConsignorUpdateStats(works) {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  const statsContainer = container.querySelector('#swConsignorStatsContainer');
  if (!statsContainer) return;
  
  // ì‘ì—… ì¢…ë¥˜ë³„ ê·¸ë£¹í™”
  const stats = {};
  works.forEach(work => {
    const typeName = work.work_type_name || 'ê¸°íƒ€';
    if (!stats[typeName]) {
      stats[typeName] = { count: 0, total: 0 };
    }
    stats[typeName].count++;
    stats[typeName].total += work.total_price || 0;
  });
  
  // HTML ìƒì„±
  const html = Object.entries(stats).map(([typeName, data]) => {
    return `
      <div class="sw-stat-box" onclick="swFilterByWorkType('${typeName}')">
        ${typeName} / ${data.count}ê±´ / í•©ê³„: ${data.total.toLocaleString()}ì›
      </div>
    `;
  }).join('');
  
  statsContainer.innerHTML = html;
}
```

### 5. ê³µí†µ í•¨ìˆ˜

#### ì‘ì—… ì¢…ë¥˜ ëª©ë¡ ë¡œë“œ (ê³µí†µ)
```javascript
/**
 * ì‘ì—… ì¢…ë¥˜ ëª©ë¡ ë¡œë“œ (ê³µí†µ)
 * ê´€ë¦¬ìì™€ í™”ì£¼ì‚¬ ëª¨ë‘ ì‚¬ìš©
 */
function swCommonLoadWorkTypes() {
  fetch('/api/special-works/types', {
    credentials: 'include',
    headers: swGetUserHeaders()
  })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        swWorkTypes = data.data || [];
        // ê´€ë¦¬ì ëª¨ë“œë©´ ì‘ì—… ì¢…ë¥˜ ê´€ë¦¬ ëª©ë¡ ì—…ë°ì´íŠ¸
        if (swCurrentRole === 'ê´€ë¦¬ì') {
          swAdminUpdateWorkTypeList(swWorkTypes);
        }
        // ì‘ì—… ì¢…ë¥˜ ì„ íƒ ë“œë¡­ë‹¤ìš´ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ì ì‘ì—… ë“±ë¡ í¼)
        if (swCurrentRole === 'ê´€ë¦¬ì') {
          swAdminUpdateWorkTypeSelects(swWorkTypes);
        }
      }
    })
    .catch(error => {
      console.error('[SW] ì‘ì—… ì¢…ë¥˜ ë¡œë“œ ì˜¤ë¥˜:', error);
    });
}
```

#### ê°€ì‹œì„± ì œì–´ (ê³µí†µ)
```javascript
/**
 * ëª¨ë“œë³„ ê°€ì‹œì„± ì œì–´
 * ê´€ë¦¬ì/í™”ì£¼ì‚¬ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
 */
function swApplyVisibility() {
  const container = document.getElementById('swContainer');
  if (!container) return;
  
  const isAdmin = swCurrentRole === 'ê´€ë¦¬ì';
  
  // ê´€ë¦¬ì ì„¹ì…˜
  container.querySelectorAll('.sw-admin-only').forEach(el => {
    el.style.display = isAdmin ? '' : 'none';
  });
  
  // í™”ì£¼ì‚¬ ì„¹ì…˜
  container.querySelectorAll('.sw-consignor-only').forEach(el => {
    el.style.display = isAdmin ? 'none' : '';
  });
}
```

---

## HTML êµ¬ì¡°

### ì „ì²´ ì»¨í…Œì´ë„ˆ
```html
<div id="swContainer">
  <!-- ê³µí†µ ì„¹ì…˜: ì‘ì—… ì¢…ë¥˜ ê´€ë¦¬, ì‘ì—… ë“±ë¡ (ê´€ë¦¬ìë§Œ í‘œì‹œ) -->
  <div id="swCommonSection">
    <!-- ì‘ì—… ì¢…ë¥˜ ê´€ë¦¬ (ê´€ë¦¬ìë§Œ) -->
    <div id="swAdminWorkTypeSection" class="sw-admin-only">
      <button onclick="swAdminToggleWorkTypeManagement()">âš™ï¸ ì‘ì—… ì¢…ë¥˜ ê´€ë¦¬</button>
      <div id="swAdminWorkTypeManagement" style="display: none;">
        <!-- ì‘ì—… ì¢…ë¥˜ ëª©ë¡ -->
      </div>
    </div>
    
    <!-- ì‘ì—… ë“±ë¡ (ê´€ë¦¬ìë§Œ) -->
    <div id="swAdminWorkRegistrationSection" class="sw-admin-only">
      <button onclick="swAdminToggleWorkRegistration()">â• ì‘ì—… ë“±ë¡</button>
      <div id="swAdminWorkRegistration" style="display: none;">
        <!-- ì‘ì—… ë“±ë¡ í¼ -->
      </div>
    </div>
  </div>
  
  <!-- ê´€ë¦¬ì ì „ìš© í•„í„° ì„¹ì…˜ -->
  <div id="swAdminFilterSection" class="sw-admin-only">
    <div>
      <label>ì‹œì‘ì¼</label>
      <input type="date" id="swAdminFilterStartDate">
    </div>
    <div>
      <label>ì¢…ë£Œì¼</label>
      <input type="date" id="swAdminFilterEndDate">
    </div>
    <div>
      <label>ì‘ì—… ì¢…ë¥˜</label>
      <select id="swAdminFilterWorkType">
        <option value="">ì „ì²´</option>
      </select>
    </div>
    <div>
      <label>í™”ì£¼ì‚¬</label>
      <select id="swAdminFilterCompany">
        <option value="">ì „ì²´ í™”ì£¼ì‚¬</option>
      </select>
    </div>
    <button onclick="swAdminLoadWorks()">ì¡°íšŒ</button>
    <div id="swAdminStatsContainer"></div>
  </div>
  
  <!-- í™”ì£¼ì‚¬ ì „ìš© í•„í„° ì„¹ì…˜ -->
  <div id="swConsignorFilterSection" class="sw-consignor-only">
    <div>
      <label>ì¡°íšŒ ì›”</label>
      <input type="month" id="swConsignorFilterMonth">
    </div>
    <button onclick="swConsignorLoadWorks()">ì¡°íšŒ</button>
    <div id="swConsignorStatsContainer"></div>
  </div>
  
  <!-- ê³µí†µ ì‘ì—… ëª©ë¡ í…Œì´ë¸” -->
  <div id="swCommonTableSection">
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>ìˆœë²ˆ</th>
            <th>ì‘ì—… ì¼ì</th>
            <th class="sw-admin-only">í™”ì£¼ì‚¬</th>
            <th>ì‘ì—… ì¢…ë¥˜</th>
            <th>ìˆ˜ëŸ‰</th>
            <th>ë‹¨ê°€</th>
            <th>ì´ì•¡</th>
            <th>ì‚¬ì§„</th>
            <th>ë©”ëª¨</th>
            <th class="sw-admin-only">ê´€ë¦¬</th>
          </tr>
        </thead>
        <tbody id="swTableBody">
          <tr>
            <td colspan="10">ë¡œë”© ì¤‘...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
```

---

## ì´ˆê¸°í™” íë¦„

```
1. í˜ì´ì§€ ë¡œë“œ ë˜ëŠ” ë©”ë‰´ í´ë¦­
   â†“
2. swCommonInit() í˜¸ì¶œ
   â”œâ”€ ì»¨í…Œì´ë„ˆ í™•ì¸
   â”œâ”€ ì—­í•  í™•ì¸ (window.currentRole)
   â”œâ”€ ì „ì—­ ë³€ìˆ˜ ì„¤ì •
   â””â”€ ëª¨ë“œë³„ ì´ˆê¸°í™” í•¨ìˆ˜ í˜¸ì¶œ
      â”œâ”€ ê´€ë¦¬ì â†’ swAdminInit()
      â”‚   â”œâ”€ ë‚ ì§œ í•„í„° ì´ˆê¸°í™”
      â”‚   â”œâ”€ swAdminLoadCompanies()
      â”‚   â”œâ”€ swCommonLoadWorkTypes()
      â”‚   â””â”€ swAdminLoadWorks()
      â”‚
      â””â”€ í™”ì£¼ì‚¬ â†’ swConsignorInit()
          â”œâ”€ ì›” í•„í„° ì´ˆê¸°í™”
          â”œâ”€ swCommonLoadWorkTypes()
          â””â”€ swConsignorLoadWorks()
   â†“
3. swApplyVisibility() í˜¸ì¶œ
   â”œâ”€ ê´€ë¦¬ì ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
   â””â”€ í™”ì£¼ì‚¬ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
   â†“
4. ëª¨ë“œë³„ ë°ì´í„° ë¡œë“œ
   â”œâ”€ ê´€ë¦¬ì â†’ swAdminLoadWorks()
   â”‚   â””â”€ swAdminRenderWorks()
   â”‚   â””â”€ swAdminUpdateStats()
   â”‚
   â””â”€ í™”ì£¼ì‚¬ â†’ swConsignorLoadWorks()
       â””â”€ swConsignorRenderWorks()
       â””â”€ swConsignorUpdateStats()
```

---

## ê°€ì‹œì„± ì œì–´

### CSS í´ë˜ìŠ¤
```css
/* ê´€ë¦¬ì ì „ìš© */
.sw-admin-only {
  display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
}

/* í™”ì£¼ì‚¬ ì „ìš© */
.sw-consignor-only {
  display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
}
```

### JavaScript ê°€ì‹œì„± ì œì–´
```javascript
function swApplyVisibility() {
  const isAdmin = swCurrentRole === 'ê´€ë¦¬ì';
  
  // ê´€ë¦¬ì ì„¹ì…˜
  document.querySelectorAll('.sw-admin-only').forEach(el => {
    el.style.display = isAdmin ? '' : 'none';
  });
  
  // í™”ì£¼ì‚¬ ì„¹ì…˜
  document.querySelectorAll('.sw-consignor-only').forEach(el => {
    el.style.display = isAdmin ? 'none' : '';
  });
}
```

---

## API ì„¤ê³„

### ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

#### ì‘ì—… ì¢…ë¥˜ API
- `GET /api/special-works/types` - ì‘ì—… ì¢…ë¥˜ ëª©ë¡ ì¡°íšŒ
- `POST /api/special-works/types` - ì‘ì—… ì¢…ë¥˜ ìƒì„±
- `PUT /api/special-works/types/<id>` - ì‘ì—… ì¢…ë¥˜ ìˆ˜ì •
- `DELETE /api/special-works/types/<id>` - ì‘ì—… ì¢…ë¥˜ ì‚­ì œ

#### ì‘ì—… API
- `GET /api/special-works/works` - ì‘ì—… ëª©ë¡ ì¡°íšŒ
  - Query Parameters:
    - `start_date` (ì„ íƒ): ì‹œì‘ì¼ (YYYY-MM-DD)
    - `end_date` (ì„ íƒ): ì¢…ë£Œì¼ (YYYY-MM-DD)
    - `work_type_id` (ì„ íƒ): ì‘ì—… ì¢…ë¥˜ ID
    - `company_name` (ì„ íƒ): í™”ì£¼ì‚¬ëª… (ê´€ë¦¬ìë§Œ ì‚¬ìš©, ì—†ìœ¼ë©´ ëª¨ë“  í™”ì£¼ì‚¬)
- `POST /api/special-works/works` - ì‘ì—… ìƒì„±
- `GET /api/special-works/works/<id>` - ì‘ì—… ìƒì„¸ ì¡°íšŒ
- `PUT /api/special-works/works/<id>` - ì‘ì—… ìˆ˜ì •
- `DELETE /api/special-works/works/<id>` - ì‘ì—… ì‚­ì œ

### API ì‘ë‹µ í˜•ì‹
```json
{
  "success": true,
  "data": [...],
  "message": "ì„±ê³µ ë©”ì‹œì§€"
}
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### í…Œì´ë¸” êµ¬ì¡°

#### special_work_types (ì‘ì—… ì¢…ë¥˜)
- `id`: INTEGER PRIMARY KEY
- `name`: TEXT NOT NULL (ì‘ì—… ì¢…ë¥˜ëª…)
- `default_unit_price`: INTEGER DEFAULT 0 (ê¸°ë³¸ ë‹¨ê°€)
- `display_order`: INTEGER DEFAULT 0 (í‘œì‹œ ìˆœì„œ)
- `created_at`: TIMESTAMP
- `updated_at`: TIMESTAMP

#### special_works (ì‘ì—…)
- `id`: INTEGER PRIMARY KEY
- `company_name`: TEXT NOT NULL (í™”ì£¼ì‚¬ëª…)
- `work_type_id`: INTEGER NOT NULL (ì‘ì—… ì¢…ë¥˜ ID)
- `work_date`: DATE NOT NULL (ì‘ì—… ì¼ì)
- `quantity`: REAL NOT NULL (ìˆ˜ëŸ‰)
- `unit_price`: INTEGER NOT NULL (ë‹¨ê°€)
- `total_price`: INTEGER NOT NULL (ì´ì•¡)
- `photo_links`: TEXT (ì‚¬ì§„ ë§í¬, ì‰¼í‘œë¡œ êµ¬ë¶„)
- `memo`: TEXT (ë©”ëª¨)
- `created_at`: TIMESTAMP
- `updated_at`: TIMESTAMP

---

## ì‘ì—… ìˆœì„œ

### 1ë‹¨ê³„: íŒŒì¼ ìƒì„±
- [ ] `special_works.html` íŒŒì¼ ìƒì„±
- [ ] `api/special_works/__init__.py` íŒŒì¼ ìƒì„±
- [ ] `api/special_works/routes_db.py` íŒŒì¼ ìƒì„±

### 2ë‹¨ê³„: HTML êµ¬ì¡° ì‘ì„±
- [ ] ì»¨í…Œì´ë„ˆ êµ¬ì¡° ì‘ì„±
- [ ] ê´€ë¦¬ì ì„¹ì…˜ ì‘ì„±
- [ ] í™”ì£¼ì‚¬ ì„¹ì…˜ ì‘ì„±
- [ ] ê³µí†µ ì„¹ì…˜ ì‘ì„±

### 3ë‹¨ê³„: CSS ì‘ì„±
- [ ] ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì‘ì„±
- [ ] ëª¨ë“œë³„ ìŠ¤íƒ€ì¼ ì‘ì„±
- [ ] ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ ì‘ì„±

### 4ë‹¨ê³„: JavaScript í•¨ìˆ˜ ì‘ì„±
- [ ] ê³µí†µ í•¨ìˆ˜ ì‘ì„± (swCommon*)
- [ ] ê´€ë¦¬ì í•¨ìˆ˜ ì‘ì„± (swAdmin*)
- [ ] í™”ì£¼ì‚¬ í•¨ìˆ˜ ì‘ì„± (swConsignor*)

### 5ë‹¨ê³„: API ì‘ì„±
- [ ] ì‘ì—… ì¢…ë¥˜ API ì‘ì„±
- [ ] ì‘ì—… API ì‘ì„±
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€

### 6ë‹¨ê³„: í†µí•©
- [ ] `app.py`ì— blueprint ë“±ë¡
- [ ] `dashboard_server.html`ì— ë©”ë‰´ ë²„íŠ¼ ì¶”ê°€
- [ ] AJAX ë¡œë“œ í•¨ìˆ˜ ì‘ì„±

### 7ë‹¨ê³„: í…ŒìŠ¤íŠ¸
- [ ] ê´€ë¦¬ì ëª¨ë“œ í…ŒìŠ¤íŠ¸
- [ ] í™”ì£¼ì‚¬ ëª¨ë“œ í…ŒìŠ¤íŠ¸
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ì˜í–¥ í™•ì¸

---

## í•¨ìˆ˜ëª… ê·œì¹™

### ì ‘ë‘ì‚¬ ê·œì¹™
- **ê³µí†µ í•¨ìˆ˜**: `swCommon*` (ì˜ˆ: `swCommonInit`, `swCommonLoadWorkTypes`)
- **ê´€ë¦¬ì í•¨ìˆ˜**: `swAdmin*` (ì˜ˆ: `swAdminInit`, `swAdminLoadWorks`, `swAdminRenderWorks`)
- **í™”ì£¼ì‚¬ í•¨ìˆ˜**: `swConsignor*` (ì˜ˆ: `swConsignorInit`, `swConsignorLoadWorks`, `swConsignorRenderWorks`)

### ID ê·œì¹™
- **ì»¨í…Œì´ë„ˆ**: `swContainer`
- **ê´€ë¦¬ì ì„¹ì…˜**: `swAdmin*` (ì˜ˆ: `swAdminFilterSection`, `swAdminWorkTypeSection`)
- **í™”ì£¼ì‚¬ ì„¹ì…˜**: `swConsignor*` (ì˜ˆ: `swConsignorFilterSection`)
- **ê³µí†µ ì„¹ì…˜**: `swCommon*` (ì˜ˆ: `swCommonTableSection`)

### CSS í´ë˜ìŠ¤ ê·œì¹™
- **ê´€ë¦¬ì ì „ìš©**: `.sw-admin-only`
- **í™”ì£¼ì‚¬ ì „ìš©**: `.sw-consignor-only`
- **ê³µí†µ ìŠ¤íƒ€ì¼**: `.sw-*` (ì˜ˆ: `.sw-container`, `.sw-table`)

---

## ì£¼ì˜ì‚¬í•­

### âš ï¸ ëª¨ë“œ ë¶„ë¦¬ ì›ì¹™
- **ì ˆëŒ€ ê¸ˆì§€**: ê´€ë¦¬ì í•¨ìˆ˜ì—ì„œ í™”ì£¼ì‚¬ í•¨ìˆ˜ í˜¸ì¶œ ê¸ˆì§€
- **ì ˆëŒ€ ê¸ˆì§€**: í™”ì£¼ì‚¬ í•¨ìˆ˜ì—ì„œ ê´€ë¦¬ì í•¨ìˆ˜ í˜¸ì¶œ ê¸ˆì§€
- **í—ˆìš©**: ê³µí†µ í•¨ìˆ˜ëŠ” ëª¨ë“  ëª¨ë“œì—ì„œ í˜¸ì¶œ ê°€ëŠ¥

### âš ï¸ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ê¸ˆì§€
- `dashboard_server.html`ì˜ ê¸°ì¡´ í•¨ìˆ˜ ìˆ˜ì • ê¸ˆì§€
- `app.py`ì˜ ê¸°ì¡´ ë¼ìš°íŠ¸ ìˆ˜ì • ê¸ˆì§€
- ê¸°ì¡´ íŒŒì¼ì€ ì¶”ê°€ë§Œ ê°€ëŠ¥ (ìˆ˜ì • ê¸ˆì§€)

### âš ï¸ ì¶©ëŒ ë°©ì§€
- ëª¨ë“  ID, í•¨ìˆ˜ëª…, CSS í´ë˜ìŠ¤ì— `sw` ì ‘ë‘ì‚¬ ì‚¬ìš©
- ê¸°ì¡´ ì½”ë“œì™€ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ì§€ `grep`ìœ¼ë¡œ í™•ì¸

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‘ì—… ì „
- [ ] ê¸°ì¡´ íŒŒì¼ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ êµ¬í˜„ ê°€ëŠ¥í•œì§€ í™•ì¸
- [ ] ëª¨ë“  ID/í•¨ìˆ˜ëª…ì´ ê¸°ì¡´ ê²ƒê³¼ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
- [ ] ëª¨ë“œë³„ í•¨ìˆ˜ê°€ ì™„ì „íˆ ë¶„ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸

### ì‘ì—… í›„
- [ ] `git diff`ë¡œ ê¸°ì¡´ íŒŒì¼ì´ ìˆ˜ì •ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
- [ ] ê´€ë¦¬ì ëª¨ë“œê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
- [ ] í™”ì£¼ì‚¬ ëª¨ë“œê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸

