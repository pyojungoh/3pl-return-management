# 📦 데이터 마이그레이션 실행 방법

로컬 SQLite 데이터베이스(`data.db`)의 데이터를 PostgreSQL로 마이그레이션합니다.

## 🚀 방법 1: 배치 파일 사용 (간단)

1. **`데이터_마이그레이션_실행.bat` 파일 실행**
2. **DATABASE_URL 입력**
   - Vercel 대시보드 → Settings → Environment Variables → DATABASE_URL
   - 값을 복사하여 붙여넣기
3. **Enter 키 누르기**
4. **마이그레이션 완료 대기**

## 🚀 방법 2: 직접 실행 (PowerShell)

### 1. Vercel에서 DATABASE_URL 복사
- Vercel 대시보드 → 프로젝트 선택
- Settings → Environment Variables
- `DATABASE_URL` 값 복사

### 2. PowerShell에서 실행

```powershell
# DATABASE_URL 환경 변수 설정
$env:DATABASE_URL="postgresql://사용자명:비밀번호@호스트/데이터베이스명?sslmode=require"

# 마이그레이션 스크립트 실행
python migrate_sqlite_to_postgresql.py
```

### 3. 결과 확인
- 화주사 계정과 반품 데이터가 마이그레이션됩니다
- 성공/건너뜀/오류 개수가 표시됩니다

## 🚀 방법 3: CMD에서 실행

```cmd
REM DATABASE_URL 환경 변수 설정
set DATABASE_URL=postgresql://사용자명:비밀번호@호스트/데이터베이스명?sslmode=require

REM 마이그레이션 스크립트 실행
python migrate_sqlite_to_postgresql.py
```

## ⚠️ 주의사항

1. **DATABASE_URL 형식**
   - Neon의 경우: `postgresql://사용자명:비밀번호@호스트/데이터베이스명?sslmode=require`
   - `?sslmode=require`가 포함되어 있어야 합니다

2. **데이터 중복 방지**
   - 이미 PostgreSQL에 있는 데이터는 건너뜀니다
   - 중복 데이터는 업데이트됩니다

3. **로컬 data.db 파일**
   - 프로젝트 루트에 `data.db` 파일이 있어야 합니다
   - 파일이 없으면 마이그레이션할 데이터가 없습니다

## 🔍 문제 해결

### DATABASE_URL 오류
- Vercel 대시보드에서 정확한 값을 복사했는지 확인
- `postgresql://`로 시작하는지 확인
- 특수문자가 있는 경우 URL 인코딩이 필요할 수 있음

### 연결 오류
- 인터넷 연결 확인
- Neon 데이터베이스가 실행 중인지 확인
- 방화벽 설정 확인

### 데이터가 마이그레이션되지 않음
- `data.db` 파일이 프로젝트 루트에 있는지 확인
- SQLite 데이터베이스에 데이터가 있는지 확인
- 마이그레이션 스크립트 실행 로그 확인

## ✅ 마이그레이션 완료 후

1. **웹사이트 접속**
   - Vercel 배포 URL로 접속
   - 관리자 계정으로 로그인 (아이디: `admin`, 비밀번호: `admin123`)

2. **데이터 확인**
   - 화주사 계정 목록 확인
   - 반품 데이터 목록 확인

3. **문제가 있으면**
   - 마이그레이션 로그 확인
   - Vercel 배포 로그 확인
   - 데이터베이스 연결 상태 확인

