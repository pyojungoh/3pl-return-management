# OAuth 2.0 redirect_uri_mismatch μ¤λ¥ ν•΄κ²°

## β μ¤λ¥ λ©”μ‹μ§€
```
400 μ¤λ¥: redirect_uri_mismatch
```

## π” μ›μΈ

OAuth ν΄λΌμ΄μ–ΈνΈ IDμ "μΉμΈλ λ¦¬λ””λ ‰μ… URI"μ™€ μ‹¤μ  μ‚¬μ©λλ” URIκ°€ μΌμΉν•μ§€ μ•μµλ‹λ‹¤.

ν„μ¬ μƒν™©:
- OAuth ν΄λΌμ΄μ–ΈνΈ ID: "μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…" νƒ€μ…μΌλ΅ μƒμ„±λ¨
- μ½”λ“: `run_local_server()` μ‚¬μ© (λ΅μ»¬ μ„λ²„ κΈ°λ°)
- `run_local_server()`λ” μλ™μΌλ΅ `http://localhost:ν¬νΈλ²νΈ` ν•μ‹μ URIλ¥Ό μƒμ„±ν•©λ‹λ‹¤

## β… ν•΄κ²° λ°©λ²•

### λ°©λ²• 1: OAuth ν΄λΌμ΄μ–ΈνΈ IDλ¥Ό "λ°μ¤ν¬ν†± μ•±"μΌλ΅ λ‹¤μ‹ μƒμ„± (κ¶μ¥)

λ΅μ»¬ ν…μ¤νΈμ—λ” "λ°μ¤ν¬ν†± μ•±" νƒ€μ…μ΄ λ” μ ν•©ν•©λ‹λ‹¤.

1. **Google Cloud Console μ ‘μ†**
   - https://console.cloud.google.com/
   - ν”„λ΅μ νΈ: `composite-dream-477907-c5`
   - APIs & Services β†’ Credentials

2. **κΈ°μ΅΄ OAuth ν΄λΌμ΄μ–ΈνΈ ID μ‚­μ ** (μ„ νƒμ‚¬ν•­)
   - λλ” μƒλ΅ μƒμ„± (κΈ°μ΅΄ κ²ƒ μ μ§€ κ°€λ¥)

3. **μƒ OAuth ν΄λΌμ΄μ–ΈνΈ ID μƒμ„±**
   - "μκ²© μ¦λ… λ§λ“¤κΈ°" β†’ "OAuth ν΄λΌμ΄μ–ΈνΈ ID"
   - **μ• ν”λ¦¬μΌ€μ΄μ… μ ν•: "λ°μ¤ν¬ν†± μ•±"** μ„ νƒ β­
   - μ΄λ¦„: `3PL μ†”λ£¨μ… Desktop Client`
   - "λ§λ“¤κΈ°" ν΄λ¦­

4. **JSON λ‹¤μ΄λ΅λ“**
   - λ‹¤μ΄λ΅λ“ν• JSON νμΌμ„ `credentials.json`μΌλ΅ κµμ²΄

5. **credentials.json ν™•μΈ**
   - νμΌ κµ¬μ΅°κ°€ λ‹¤λ¥Ό μ μμµλ‹λ‹¤:
   ```json
   {
     "installed": {
       "client_id": "...",
       "project_id": "...",
       "auth_uri": "...",
       "token_uri": "...",
       "client_secret": "...",
       "redirect_uris": ["http://localhost"]
     }
   }
   ```
   - `web` λ€μ‹  `installed` ν‚¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤

6. **μ½”λ“ μμ • ν•„μ” μ—¬λ¶€ ν™•μΈ**
   - `oauth_drive.py`μ `get_credentials()` ν•¨μκ°€ `installed` ν•μ‹λ„ μ§€μ›ν•λ”μ§€ ν™•μΈ

### λ°©λ²• 2: ν„μ¬ "μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…" ν΄λΌμ΄μ–ΈνΈ ID μ‚¬μ© (λ¦¬λ””λ ‰μ… URI μ¶”κ°€)

ν„μ¬ ν΄λΌμ΄μ–ΈνΈ IDλ¥Ό κ·Έλ€λ΅ μ‚¬μ©ν•λ ¤λ©΄:

1. **Google Cloud Console μ ‘μ†**
   - OAuth ν΄λΌμ΄μ–ΈνΈ ID νΈμ§‘

2. **μΉμΈλ λ¦¬λ””λ ‰μ… URI μ¶”κ°€**
   - `http://localhost:5000`
   - `http://localhost:5000/oauth2callback` (μΌλ°μ μΈ μ½λ°± κ²½λ΅)
   - `http://localhost:*` (λ¨λ“  ν¬νΈ ν—μ© - λ³΄μ•μƒ κ¶μ¥ν•μ§€ μ•μ)

3. **μ €μ¥**

ν•μ§€λ§ `run_local_server()`λ” λ™μ  ν¬νΈλ¥Ό μ‚¬μ©ν•λ―€λ΅ μ •ν™•ν• URIλ¥Ό μ• μ μ—†μµλ‹λ‹¤.

## π’΅ κ¶μ¥ ν•΄κ²°μ±…

**"λ°μ¤ν¬ν†± μ•±" νƒ€μ…μΌλ΅ λ‹¤μ‹ μƒμ„±ν•λ” κ²ƒμ΄ κ°€μ¥ κ°„λ‹¨ν•©λ‹λ‹¤.**

### λ‹¨κ³„λ³„ κ°€μ΄λ“

1. **Google Cloud Consoleμ—μ„ "λ°μ¤ν¬ν†± μ•±" ν΄λΌμ΄μ–ΈνΈ ID μƒμ„±**
2. **μƒ JSON νμΌ λ‹¤μ΄λ΅λ“**
3. **κΈ°μ΅΄ credentials.json κµμ²΄**
4. **μ½”λ“κ°€ `installed` ν•μ‹μ„ μ§€μ›ν•λ”μ§€ ν™•μΈ λ° μμ •**

## π”§ μ½”λ“ μμ • ν•„μ” μ—¬λ¶€

`oauth_drive.py`μ `get_credentials()` ν•¨μκ°€ `installed` ν•μ‹μ„ μ§€μ›ν•λ„λ΅ μμ •μ΄ ν•„μ”ν•  μ μμµλ‹λ‹¤.

